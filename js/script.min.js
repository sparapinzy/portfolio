function addSlide(e,t){const n=document.getElementById(e),o=document.createElement("figure");let l=`${t.title} — ${t.medium}`;t.size&&(l+=` — ${t.size}`),l+=` — ${t.year}`,o.innerHTML=`\n    <img src="${t.image}" alt="${l}" loading="lazy">\n    <figcaption>${l}</figcaption>\n  `,n.appendChild(o)}function initCarousel(e){const t=document.getElementById(e),n=t.closest(".carousel");let o=t.querySelectorAll("figure");if(0===o.length)return;const l=o[0].cloneNode(!0),a=o[o.length-1].cloneNode(!0);l.id="first-clone",a.id="last-clone",t.appendChild(l),t.insertBefore(a,o[0]),o=t.querySelectorAll("figure");let r=1;const s=o[r].clientWidth;t.style.transform=`translateX(${-s*r}px)`;const c=n.querySelector(".next"),d=n.querySelector(".prev"),i=document.getElementById("pause-carousel");let m=!1,u=setInterval(g,4e3);function g(){r>=o.length-1||(r++,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(${-s*r}px)`)}function h(){r<=0||(r--,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(${-s*r}px)`)}function y(){m||(clearInterval(u),u=setInterval(g,2e3))}t.addEventListener("transitionend",()=>{"first-clone"===o[r].id&&(t.style.transition="none",r=1,t.style.transform=`translateX(${-s*r}px)`),"last-clone"===o[r].id&&(t.style.transition="none",r=o.length-2,t.style.transform=`translateX(${-s*r}px)`)}),c.addEventListener("click",()=>{g(),y()}),d.addEventListener("click",()=>{h(),y()}),i.addEventListener("click",()=>{m?(u=setInterval(g,2e3),i.textContent="⏸"):(clearInterval(u),i.textContent="▶"),m=!m}),window.addEventListener("resize",()=>{const e=o[r].clientWidth;t.style.transition="none",t.style.transform=`translateX(${-e*r}px)`}),document.addEventListener("keydown",e=>{"ArrowRight"===e.key&&(g(),y()),"ArrowLeft"===e.key&&(h(),y())});let f=0,E=0;t.addEventListener("touchstart",e=>{f=e.touches[0].clientX}),t.addEventListener("touchend",e=>{E=e.changedTouches[0].clientX;const t=f-E;Math.abs(t)>50&&(t>0?g():h(),y())})}fetch("artworks.json").then(e=>e.json()).then(e=>{document.getElementById("featured-carousel")&&(e.filter(e=>e.featured).forEach(e=>addSlide("featured-carousel",e)),initCarousel("featured-carousel")),document.getElementById("latest-carousel")&&(e.sort((e,t)=>t.year-e.year).slice(0,5).forEach(e=>addSlide("latest-carousel",e)),initCarousel("latest-carousel")),document.getElementById("all-carousel")&&(e.sort((e,t)=>t.year-e.year).forEach(e=>addSlide("all-carousel",e)),initCarousel("all-carousel"))}).catch(e=>console.error("Error loading artworks:",e));const themeToggle=document.getElementById("theme-toggle"),themeIcon=document.getElementById("theme-icon"),siteLogo=document.getElementById("site-logo"),sunIcon='\n  <circle cx="12" cy="12" r="5" fill="currentColor"/>\n  <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>\n',moonIcon='\n  <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" fill="currentColor"/>\n';function updateThemeIcon(){themeIcon&&(document.body.classList.contains("dark-mode")?themeIcon.innerHTML=sunIcon:themeIcon.innerHTML=moonIcon)}themeToggle&&(themeToggle.addEventListener("click",()=>{document.body.classList.toggle("dark-mode"),document.body.classList.contains("dark-mode")?(localStorage.setItem("theme","dark"),siteLogo&&(siteLogo.src="images/logo-dark.svg")):(localStorage.setItem("theme","light"),siteLogo&&(siteLogo.src="images/logo-light.svg")),updateThemeIcon()}),"dark"===localStorage.getItem("theme")?(document.body.classList.add("dark-mode"),siteLogo&&(siteLogo.src="images/logo-dark.svg")):siteLogo&&(siteLogo.src="images/logo-light.svg"),updateThemeIcon());const yearEl=document.getElementById("current-year");yearEl&&(yearEl.textContent=(new Date).getFullYear());const lastUpdatedEl=document.getElementById("last-updated");if(lastUpdatedEl){const e=new Date(document.lastModified);lastUpdatedEl.textContent=e.toLocaleDateString()}