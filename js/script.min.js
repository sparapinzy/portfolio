function addSlide(e,t){const n=document.getElementById(e),o=document.createElement("figure");let l=`${t.title} — ${t.medium}`;t.size&&(l+=` — ${t.size}`),l+=` — ${t.year}`,o.innerHTML=`\n    <img src="${t.image}" alt="${l}" loading="lazy">\n    <figcaption>${l}</figcaption>\n  `,n.appendChild(o)}function initCarousel(e){const t=document.getElementById(e),n=t.closest(".carousel");let o=t.querySelectorAll("figure");if(0===o.length)return;const l=o[0].cloneNode(!0),r=o[o.length-1].cloneNode(!0);l.id="first-clone",r.id="last-clone",t.appendChild(l),t.insertBefore(r,o[0]),o=t.querySelectorAll("figure");let s=1;const a=o[s].clientWidth;t.style.transform=`translateX(${-a*s}px)`;const i=n.querySelector(".next"),c=n.querySelector(".prev"),d=document.getElementById("pause-carousel");let g=!1,m=setInterval(u,4e3);function u(){s>=o.length-1||(s++,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(${-a*s}px)`)}function h(){s<=0||(s--,t.style.transition="transform 0.5s ease-in-out",t.style.transform=`translateX(${-a*s}px)`)}function y(){g||(clearInterval(m),m=setInterval(u,2e3))}t.addEventListener("transitionend",()=>{"first-clone"===o[s].id&&(t.style.transition="none",s=1,t.style.transform=`translateX(${-a*s}px)`),"last-clone"===o[s].id&&(t.style.transition="none",s=o.length-2,t.style.transform=`translateX(${-a*s}px)`)}),i.addEventListener("click",()=>{u(),y()}),c.addEventListener("click",()=>{h(),y()}),d.addEventListener("click",()=>{g?(m=setInterval(u,4e3),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>'):(clearInterval(m),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>'),g=!g}),window.addEventListener("resize",()=>{const e=o[s].clientWidth;t.style.transition="none",t.style.transform=`translateX(${-e*s}px)`}),document.addEventListener("keydown",e=>{"ArrowRight"===e.key&&(u(),y()),"ArrowLeft"===e.key&&(h(),y())});let f=0,E=0;t.addEventListener("touchstart",e=>{f=e.touches[0].clientX}),t.addEventListener("touchend",e=>{E=e.changedTouches[0].clientX;const t=f-E;Math.abs(t)>50&&(t>0?u():h(),y())})}fetch("artworks.json").then(e=>e.json()).then(e=>{document.getElementById("featured-carousel")&&(e.filter(e=>e.featured).forEach(e=>addSlide("featured-carousel",e)),initCarousel("featured-carousel")),document.getElementById("latest-carousel")&&(e.sort((e,t)=>t.year-e.year).slice(0,5).forEach(e=>addSlide("latest-carousel",e)),initCarousel("latest-carousel")),document.getElementById("all-carousel")&&(e.sort((e,t)=>t.year-e.year).forEach(e=>addSlide("all-carousel",e)),initCarousel("all-carousel"))}).catch(e=>console.error("Error loading artworks:",e));const themeToggle=document.getElementById("theme-toggle"),themeIcon=document.getElementById("theme-icon"),siteLogo=document.getElementById("site-logo"),sunIcon='\n  <circle cx="12" cy="12" r="5" fill="currentColor"/>\n  <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>\n',moonIcon='\n  <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" fill="currentColor"/>\n';function updateThemeIcon(){themeIcon&&(document.body.classList.contains("dark-mode")?themeIcon.innerHTML=sunIcon:themeIcon.innerHTML=moonIcon)}themeToggle&&(themeToggle.addEventListener("click",()=>{document.body.classList.toggle("dark-mode"),document.body.classList.contains("dark-mode")?(localStorage.setItem("theme","dark"),siteLogo&&(siteLogo.src="images/logo-dark.svg")):(localStorage.setItem("theme","light"),siteLogo&&(siteLogo.src="images/logo-light.svg")),updateThemeIcon()}),"dark"===localStorage.getItem("theme")?(document.body.classList.add("dark-mode"),siteLogo&&(siteLogo.src="images/logo-dark.svg")):siteLogo&&(siteLogo.src="images/logo-light.svg"),updateThemeIcon());const yearEl=document.getElementById("current-year");yearEl&&(yearEl.textContent=(new Date).getFullYear());const lastUpdatedEl=document.getElementById("last-updated");if(lastUpdatedEl){const e=new Date(document.lastModified);lastUpdatedEl.textContent=e.toLocaleDateString()}